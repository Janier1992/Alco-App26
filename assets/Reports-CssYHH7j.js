import{j as e,M as f,R as k,A as N,a as v}from"./vendor-ui-Csmkvd-_.js";import{r as c}from"./vendor-react-B11IQRCK.js";import{G as E}from"./vendor-core-L0lX3Z62.js";import{u as w,a as A,t as p,R,f as y,q as C,M as P}from"./index-jGGe8DBG.js";import{B as T}from"./Breadcrumbs-D1gceSdN.js";const $=()=>{const{theme:I}=w(),{addNotification:l}=A(),[i,x]=c.useState(!1),[s,n]=c.useState({reportType:"",dateRange:"last30",area:"all"}),[t,h]=c.useState(null),g=async r=>{if(r.preventDefault(),!s.reportType)return l({type:"warning",title:"REPORTE INCOMPLETO",message:"Seleccione un tipo de análisis estratégico."});x(!0),l({type:"info",title:"PROCESANDO BI",message:"Sincronizando KPIs de Calidad, Auditorías y CAPA..."});try{const a={ncs:Math.floor(Math.random()*40),calibVenc:Math.floor(Math.random()*5),oee:(Math.random()*10+85).toFixed(1),topProcess:s.area==="all"?"Pintura":s.area},u=new E("AIzaSyAao48NBXbU0Kqwp8vJJl7J3I4vU4sRKO4").getGenerativeModel({model:"gemini-1.5-flash"}),b=`Actúa como Director de Calidad de Alco Proyectos. Genera un reporte BI para el periodo: ${s.dateRange}. 
            Tipo: ${s.reportType}. Datos: NCs Activas: ${a.ncs}, Calibraciones Vencidas: ${a.calibVenc}, OEE: ${a.oee}%. 
            Análisis específico para el área: ${s.area==="all"?"PLANTA GENERAL":s.area}.
            Estructura: 1. Resumen Gerencial, 2. Análisis de Riesgos en Proceso ${a.topProcess}, 3. Tres Recomendaciones de Mejora Continua (CAPA) enfocadas en Calidad ISO 9001. Usa Markdown profesional. Responde SIEMPRE en Español (ESTRICTAMENTE).`,j=(await u.generateContent(b)).response.text();h({analysis:j,kpis:a,timestamp:new Date().toLocaleString(),trends:P.qualityTrend.map(m=>({...m,value:m.value+(Math.random()*5-2.5)}))}),l({type:"success",title:"INTELIGENCIA GENERADA",message:"El reporte estratégico está listo para revisión gerencial."})}catch{l({type:"error",title:"FALLO EN MOTORES BI",message:"No se pudo procesar el análisis inteligente."})}finally{x(!1)}},o="w-full p-4 bg-white dark:bg-slate-800 border-none rounded-2xl text-xs font-black uppercase tracking-widest shadow-sm focus:ring-2 focus:ring-sky-500 outline-none",d="text-[9px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] ml-2 mb-2 block";return e.jsxs("div",{className:"animate-fade-in space-y-8 pb-20",children:[e.jsx(T,{crumbs:[{label:"BI & ANALÍTICA",path:"/dashboard"},{label:"GENERADOR DE REPORTES"}]}),e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-slate-800 dark:text-white uppercase tracking-tighter leading-none",children:["Business ",e.jsx("span",{className:"text-sky-600",children:"Intelligence"})]}),e.jsxs("p",{className:"text-slate-500 font-bold mt-2 uppercase text-xs tracking-widest flex items-center gap-2",children:[e.jsx(p,{})," Consolidación Estratégica de Planta"]})]})}),e.jsxs("form",{onSubmit:g,className:"bg-white dark:bg-slate-800/40 p-10 rounded-[3.5rem] border border-slate-100 dark:border-white/5 shadow-xl grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Tipo de Reporte"}),e.jsxs("select",{value:s.reportType,onChange:r=>n(a=>({...a,reportType:r.target.value})),required:!0,className:o,children:[e.jsx("option",{value:"",children:"SELECCIONE..."}),e.jsx("option",{value:"calidad",children:"Análisis de Calidad ISO 9001"}),e.jsx("option",{value:"auditoria",children:"Resumen de Auditorías"}),e.jsx("option",{value:"metrologia",children:"Balance de Metrología"}),e.jsx("option",{value:"operativo",children:"Desempeño Operativo Planta"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Rango de Datos"}),e.jsxs("select",{value:s.dateRange,onChange:r=>n(a=>({...a,dateRange:r.target.value})),className:o,children:[e.jsx("option",{value:"last30",children:"Últimos 30 días"}),e.jsx("option",{value:"last90",children:"Último Trimestre"}),e.jsx("option",{value:"year",children:"Anual Consolidado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Área de Interés"}),e.jsxs("select",{value:s.area,onChange:r=>n(a=>({...a,area:r.target.value})),className:o,children:[e.jsx("option",{value:"all",children:"Toda la Planta"}),e.jsx("option",{value:"CORTE DE",children:"Corte de Perfilería"}),e.jsx("option",{value:"PINTURA",children:"Planta Pintura"}),e.jsx("option",{value:"ENSAMBLE",children:"Ensamble Fachada"}),e.jsx("option",{value:"FELPA / EMPAQUE",children:"Felpa / Empaque"})]})]}),e.jsx("div",{children:e.jsxs("button",{type:"submit",disabled:i,className:`w - full py - 4 rounded - 2xl font - black text - [11px] uppercase tracking - widest transition - all shadow - xl flex items - center justify - center gap - 3 ${i?"bg-slate-100 text-slate-400":"bg-sky-600 text-white hover:scale-105 active:scale-95 shadow-sky-600/20"} `,children:[i?e.jsx(R,{className:"animate-spin"}):e.jsx(p,{}),i?"PROCESANDO...":"GENERAR REPORTE"]})})]}),t&&e.jsxs("div",{className:"animate-fade-in-up space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] border-l-8 border-rose-500 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"NCs Detectadas"}),e.jsx("p",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tighter",children:t.kpis.ncs})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] border-l-8 border-emerald-500 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"OEE Global"}),e.jsxs("p",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tighter",children:[t.kpis.oee,"%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] border-l-8 border-amber-500 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"Vencimientos Prox."}),e.jsx("p",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tighter",children:t.kpis.calibVenc})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] border-l-8 border-sky-500 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"Eficacia CAPA"}),e.jsx("p",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tighter",children:"94.2%"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 bg-white dark:bg-slate-800 p-12 rounded-[4rem] shadow-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-2xl font-black uppercase tracking-tighter mb-10 flex items-center gap-4 text-sky-600",children:[e.jsx(y,{})," Análisis Estratégico IA"]}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-slate-700 dark:text-slate-300 font-medium leading-relaxed",children:e.jsx(f,{children:t.analysis})}),e.jsxs("div",{className:"mt-12 pt-8 border-t dark:border-slate-700 flex justify-between items-center text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[e.jsxs("span",{children:["Reporte generado el: ",t.timestamp]}),e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 hover:text-sky-600 transition-colors",children:[e.jsx(C,{})," Exportar Copia Controlada PDF"]})]})]}),e.jsx("div",{className:"lg:col-span-4 space-y-6",children:e.jsxs("div",{className:"bg-slate-950 p-10 rounded-[3rem] text-white shadow-2xl relative overflow-hidden group",children:[e.jsx(p,{className:"absolute -right-8 -bottom-8 text-9xl opacity-5 group-hover:scale-110 transition-transform"}),e.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-sky-400 mb-6",children:"Tendencia de Calidad"}),e.jsx("div",{className:"h-48",children:e.jsx(k,{width:"100%",height:"100%",children:e.jsx(N,{data:t.trends,children:e.jsx(v,{type:"monotone",dataKey:"value",stroke:"#0ea5e9",strokeWidth:4,fill:"#0ea5e9",fillOpacity:.1})})})}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-6 uppercase text-center italic",children:'"La curva indica una mejora del 2.4% en el cumplimiento FTQ"'})]})})]})]})]})};export{$ as default};
